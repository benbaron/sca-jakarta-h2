-- V3: subtype -> schedule kind defaults (drives UI tab gating and validation defaults)
-- Per-account overrides still live in account_schedule_requirement.

CREATE TABLE account_subtype_schedule_default (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  subtype VARCHAR(40) NOT NULL,
  schedule_kind_id BIGINT NOT NULL,
  CONSTRAINT uq_subtype_sched UNIQUE (subtype, schedule_kind_id),
  CONSTRAINT fk_subtype_sched_kind FOREIGN KEY (schedule_kind_id) REFERENCES schedule_kind(id)
);

CREATE INDEX ix_subtype_sched_subtype ON account_subtype_schedule_default(subtype);
